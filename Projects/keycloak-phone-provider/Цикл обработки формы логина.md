Как выбирается форма для отрисовки?
- Юзер заходит на /auth
- По теме из Realm settings выбирается какие ftl шаблоны будут использоваться (login.ftl)
- Далее уже исполняются actionForm в котором непосредственно вызов отрисовки (Phone Number Form)

Отрисовка формы Phone Number Form:
```
PhoneNumberForm (На шаге Phone Number Form из Flow вызывается метод challenge() и отрисовывается форма)

Полностью цикл отрисовки такой, методы берутся из родителя UsernamePasswordForm
Authenticator.requiresUser()
Authenticator.authenticate()
Authenticator.action()
Authenticator.challenge()
```

Отправка кода по смс из Phone Number Form (без абстрактных классов):
```
Нажатие на отправить код -> 

В login.ftl вызывается axios.get(window.location.origin + '/realms/${realm.name}/sms/authentication-code', params) AJAX-запрос ->

SmsResource (выбирается путь /authentication-code и устанавливается тип токена AUTH (в зависимости от пути)) ->

TokenCodeResource (выбор провайдера PhoneProvider, канонизация телефона по гугловской либе, проверка доп. условий) ->

DefaultPhoneProvider.sendTokenCode() (проверка кол-ва попыток, был ли отправлен код ранее) -> 

MtsbSmsSenderService.sendMessage() (отправка смс, сохранение в таблицу PHONE_MESSAGE_TOKEN_CODE инфо по коду)
```

Нажатие кнопки submit(Вход) в Phone Number Form (без абстрактных классов):
```
Нажатие на Submit -> 

В login.ftl вызывается -> <form id="kc-form-login" onsubmit="login.disabled = true; return true;" action="${url.loginAction}" method="post"> ->

Из браузера отправляется стандартный keycloak запрос POST: /realms/${realm.name}/login-actions/authenticate?session_code=...&execution=...&client_id=...&tab_id=... -> 

В родителе PhoneNumberForm extends UsernamePasswordForm вызывается action(AuthenticationFlowContext context) -> 

PhoneNumberForm.validateForm(context, inputData) (проверка ввода телефона и ввода кода) ->

PhoneNumberForm.validatePhone(context, phoneNumber, code.trim()) 
(канонизация телефона, 
поиск юзера по номеру телефона в атрибутах
проверка кода в PhoneVerificationCodeProvider.validateCode(user, phoneNumber, code, TokenCodeType.AUTH) по http запросу /otp,
валидация юзера  
) ->

Ответ из UsernamePasswordForm.action(AuthenticationFlowContext context)

```