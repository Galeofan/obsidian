---
tags:
  - FP
---
В программировании термин **лямбда** обозначает возможность передать в качестве параметра блок кода.
Переданный блок кода может быть вызван в любой момент времени или не вызван вообще.

Лямбда в Java сводится к упрощению записи анонимного класса.
```java
        Comparator<Attachment> comparator = new Comparator<Attachment>() {
            @Override
            public int compare(Attachment left, Attachment right) {
                return Integer.compare(left.getSize(), right.getSize());
            }
        };
```
Можно заменить на
```java
Comparator<Attachment> comparator = (left, right) -> Integer.compare(left.getSize(), right.getSize());
```
Символы тире и больше указывают на начало тела метода.


### Lambda блок
Лямбда удобно использовать, когда функция описывается в одну строчку.
Иногда вычисление может занять несколько строчек. В этом случае лямбда описывается через блок.
Опишем лямбда-блок через шаблон:
```
(ПАРАМЕТРЫ) -> {
   ОПЕРАТОРЫ;
   return ЗНАЧЕНИЕ;
}
```
Рассмотрим пример с выводом отладочной информации на консоль.

Отладочная информация - это дополнительные данные, которые добавляются в код с целью получения информации о ходе выполнения кода. 

Было:
```java
Comparator<Attachment> comparator = (left, right) -> Integer.compare(left.getSize(), right.getSize());
```
Стало (Здесь добавлена отладочная информация, которая выводит в консоль результат каждого сравнения объектов компаратором):
```java
Comparator<Attachment> comparator = (left, right) -> {
    System.out.println("compare - " + left.getSize() + " : " + right.getSize());
    return Integer.compare(left.getSize(), right.getSize());
};
```


### Отложенное исполнение лямбды
Лямбда обладает свойством отложенного выполнения (deferred execution). У отложенного выполнения есть и "брат-близнец" - ленивая загрузка (lazy load).
Разница между ними в том, что отложенное исполнение начинает вычисление только тогда, когда пользователь запросил его результат, а ленивая загрузка подразумевает, что работа не будет производиться, пока она не понадобится.
Ленивая загрузка упоминается чаще в контексте загрузки элементов или объектов. Например, загрузка классов ссылочных полей загружаемого класса будет выполняться только тогда, когда к ним произойдёт явное обращение в программе. (Другой способ - это eager (энергичная) загрузка, когда вся последовательность элементов загружается сразу, а не только когда элемент необходим).
Отложенное выполнение более точно описывает процесс, происходящий в лямбде - код внутри неё начнет выполняться только тогда, когда произойдёт обращение за его результатом.
``` java
String[] names = {
        "Ivan",
};
Comparator<String> lengthComparator = (left, right) -> {
    System.out.println("execute comparator");
    return Integer.compare(left.length(), right.length());
};
Arrays.sort(names, lengthComparator);
```
Что будет выведено на консоль? Ничего. Хотя мы и добавили отладочную информацию в лямбда, она не будет выведена.

Лямбда вычисляется, когда вызывается метод у функционального интерфейса. В нашем примере это метод compare.

Он не был вызван, так как массив содержит одно значение. Сортировать тут не нужно.