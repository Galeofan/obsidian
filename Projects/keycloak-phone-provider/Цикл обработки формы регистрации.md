Как выбирается форма для отрисовки?
- Юзер заходит на /registration
- По теме из Realm settings выбирается какие ftl шаблоны будут использоваться (register.ftl)
- Далее уже исполняются actionForm в котором непосредственно вызов отрисовки (Registration Phone User Creation)
- Важно понимать что поток регистрации как бы встраивается в lifecycle рендера формы, который управляется основным FormAuthenticator’ом

Отрисовка формы Registration Phone User Creation:
```
PhoneNumberForm (На шаге Registration Phone User Creation из Flow вызывается метод public void buildPage(FormContext context, LoginFormsProvider form) и отрисовывается форма)

Полностью цикл отрисовки такой, методы берутся из родителя UsernamePasswordForm
Authenticator.requiresUser()
Authenticator.authenticate()
Authenticator.action()
Authenticator.challenge()
```


```
                  ┌────────────────────────────────┐
                  │        Browser request         │
                  └────────────────────────────────┘
                                  │
                         GET /register
                                  │
                     AuthenticationProcessor
                                  │
                     FormAuthenticationFlow
                                  │
                    RegistrationPage.challenge()
                                  │
                     buildPage() on all FormAction
                                  │
                        register.ftl rendered
                                  │
             ┌────────────────────┴────────────────────┐
             │                                         │
         User presses submit                    User refreshes page
             │
POST /login-actions/registration
             │
    FormAuthenticationFlow.processAction()
             │
   FormAction.validate() for each action
             │
     OK? ────── No → challenge() → redraw form
             │
            Yes
             │
  FormAction.success() for each action
             │
RegistrationPage.success() / AuthenticationProcessor
             │
           DONE

```